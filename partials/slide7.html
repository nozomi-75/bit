<div class="row w-100 g-3">
    <div class="col-12 col-md-6 mb-3 mb-md-0">
        <div class="card shadow-sm h-100">
            <div class="card-header card-header-bordered">
                <h4 class="card-title my-2 fw-bold">Server Layer Diagram</h4>
            </div>
            <div class="card-body">
                <div class="mermaid">
                    flowchart TB
                    
                    subgraph "Server Layer"
                      SokoApp["SokoApplication"]:::server
                    
                      subgraph "Controller Layer"
                        Controller["ProductController"]:::server
                      end
                    
                      subgraph "Service Layer"
                        ProdService["ProductService"]:::server
                        CsvService["CsvExportService"]:::server
                      end
                    
                      subgraph "Repository Layer"
                        Repository["ProductRepository"]:::server
                      end
                    
                      Model["Product Entity"]:::server
                    end
                    
                    style SokoApp fill:#E9FBEA,stroke:#28a745
                    style Controller fill:#E9FBEA,stroke:#28a745
                    style ProdService fill:#E9FBEA,stroke:#28a745
                    style CsvService fill:#E9FBEA,stroke:#28a745
                    style Repository fill:#E9FBEA,stroke:#28a745
                    style Model fill:#E9FBEA,stroke:#28a745
                    
                    Controller -->|"calls"| ProdService
                    Controller -->|"export CSV"| CsvService
                    ProdService -->|"queries"| Repository
                    CsvService -->|"queries"| Repository
                    Repository -->|"persists/reads"| Database["Database"]
                </div>
            </div>
        </div>
    </div>

    <div class="col-12 col-md-6 d-flex flex-column">
        <div class="card shadow-sm mb-3 flex-grow-1">
            <div class="card-header card-header-bordered">
                <h4 class="card-title my-2 fw-bold">The Server Layer</h4>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item">
                        <div class="fw-bold"><i class="bi bi-router-fill me-2 text-success"></i>Controller Layer</div>
                        <p class="mb-0">This layer serves as the <strong>API endpoint</strong>. The <code>ProductController</code> receives all incoming HTTP requests and delegates them to the appropriate service layer components.</p>
                    </li>
                    <li class="list-group-item">
                        <div class="fw-bold"><i class="bi bi-cpu-fill me-2 text-info"></i>Service Layer</div>
                        <p class="mb-0">The service layer contains the <strong>core business logic</strong> of the application. The <code>ProductService</code> handles product operations, while the <code>CsvExportService</code> manages the data export functionality.</p>
                    </li>
                    <li class="list-group-item">
                        <div class="fw-bold"><i class="bi bi-database-fill-lock me-2 text-danger"></i>Repository Layer</div>
                        <p class="mb-0">The <code>ProductRepository</code> uses <strong>Spring Data JPA</strong> to handle all interactions with the database, while abstracting away the complexities of low-level SQL queries.</p>
                    </li>
                </ul>
            </div>
        </div>
        <div class="card shadow-sm flex-grow-1 mt-3">
            <div class="card-header card-header-bordered">
                <h4 class="card-title my-2 fw-bold">Related Information</h4>
            </div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <li class="list-group-item"><a href="https://github.com/nozomi-75/soko/blob/main/src/main/java/com/keiaa/soko/controller/ProductController.java" target="_blank"><code>/src/main/java/com/keiaa/soko/controller/ProductController.java</code></a></li>
                    <li class="list-group-item"><a href="https://github.com/nozomi-75/soko/blob/main/src/main/java/com/keiaa/soko/service/ProductService.java" target="_blank"><code>/src/main/java/com/keiaa/soko/service/ProductService.java</code></a></li>
                    <li class="list-group-item"><a href="https://github.com/nozomi-75/soko/blob/main/src/main/java/com/keiaa/soko/service/CsvExportService.java" target="_blank"><code>/src/main/java/com/keiaa/soko/service/CsvExportService.java</code></a></li>
                    <li class="list-group-item"><a href="https://github.com/nozomi-75/soko/blob/main/src/main/java/com/keiaa/soko/repository/ProductRepository.java" target="_blank"><code>/src/main/java/com/keiaa/soko/repository/ProductRepository.java</code></a></li>
                </ul>
            </div>
        </div>
    </div>
</div>